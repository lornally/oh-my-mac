> 本来, 我的移动硬盘没啥大毛病, 就是某些文件夹清空之后无法删除. 直到我用系统的disk util, 然后硬盘彻底无法挂载了mount

### 苹果你就是个大坑货

1. 不用first aid, 还能把文件copy出来. 用了之后彻底完球了.
2. 官方论坛没有任何有意义内容, 都是重新格式化, 谁让你不用timemachine巴拉巴拉. 我用tm啊, 但是, 谁会用tm搞外接移动盘啊. 
3. 苹果, 你家的硬盘那么贵, 为啥在闪存盘如此贵的情况下, 机器里面不放双硬盘呢? 
4. 机器还没到使用年限, 你家的系统就不支持了. 这让买了顶配的玩家怎么办?

### 幸亏还有大神

- https://matt.sh/apfs-object-map-free-recovery
- 这神仙用开源项目解决问题.
  - https://github.com/libyal/libfsapfs
- https://forums.macrumors.com/threads/apfs-system-volume-recovery-after-macbook-air-logic-board-failure.2193705/
- 这里讨论了另一个开源项目, 作者亲自答疑
  -  https://github.com/jivanpal/apfs-tools

### 步骤

```sh
# brew安装, 记得开代理, 不然慢到怀疑人生
brew cask install osxfuse
# 此时需要重新启动

# 在一个目录玩
mkdir got

# 解压从开源项目下载的release包
tar xfv libfsapfs-experimental-20201107.tar.gz

# 编译项目
CC="xcrun gcc" ./configure
make -j12

# 查看一下需要挂载的磁盘
diskutil list
# 我的情况是 /dev/disk3 是 /dev/disk4 (synthesized):的container
# 执行
./fsapfsmount -X volicon=/Library/Filesystems/osxfuse.fs/Contents/Resources/Volume.icns /dev/disk3 got

```

